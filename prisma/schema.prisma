generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("ENV_DB_CENTRAL_URL")
}

model User {
  id          Int     @id @default(autoincrement())
  userName    String  @unique
  displayName String?
  email       String? @unique
  password    String  @db.Text
  status      Int     @default(1)

  substandardConditionReports       SubstandardConditionReport[]
  substandardConditionReportLikes   SubstandardConditionReportLike[]
  substandardConditionReportReplies SubstandardConditionReportReply[]
}

model SubstandardConditionReport {
  id          Int      @id @default(autoincrement())
  userId      Int
  description String
  date        DateTime @default(now()) @db.Timestamp
  status      Int      @default(1)

  user    User                              @relation(fields: [userId], references: [id])
  likes   SubstandardConditionReportLike[]
  replies SubstandardConditionReportReply[]
}

model SubstandardConditionReportLike {
  id                     Int      @id @default(autoincrement())
  userId                 Int
  substandardConditionId Int
  date                   DateTime @default(now()) @db.Timestamp

  user                       User                       @relation(fields: [userId], references: [id])
  substandardConditionReport SubstandardConditionReport @relation(fields: [substandardConditionId], references: [id])
}

model SubstandardConditionReportReply {
  id                     Int      @id @default(autoincrement())
  userId                 Int
  substandardConditionId Int
  comment                String
  date                   DateTime @default(now()) @db.Timestamp

  user                       User                       @relation(fields: [userId], references: [id])
  substandardConditionReport SubstandardConditionReport @relation(fields: [substandardConditionId], references: [id])
}
